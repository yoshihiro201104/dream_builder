<%# vh-100で画面の縦幅いっぱい %>
<div class="d-flex flex-column min-vh-100">

  <%# メインコンテンツ部分 %>
  <main class="container mt-5 flex-grow-1">

<%# 夢を追加するフォーム %>
<h3 class="text-center mt-5">あなたの夢</h3>
<%= form_with model: Dream.new, url: dreams_path, local: true, html: { multipart: true } do |f| %>
  <div class="input-group my-3">
    <%= f.file_field :image, class: "form-control" %>
    <%= f.submit "追加", class: "btn btn-primary" %>
  </div>
<% end %>

<%# 夢の画像一覧表示（ヴィジョンボード風） %>
<div class="d-flex flex-wrap gap-2 justify-content-center">
  <% @user.dreams.each do |dream| %>
    <div class="position-relative">
      <%= image_tag dream.image.variant(resize: "100x100"), class: "rounded shadow-sm" %>
      <%= link_to "×", dream_path(dream), method: :delete, class: "position-absolute top-0 start-100 translate-middle btn-close" %>
    </div>
  <% end %>
</div>



    <%# プロフィールカード %>
    <div class="card mx-auto shadow-lg border-0" style="max-width: 400px;">
      <div class="card-body text-center">
        <%= image_tag @user.get_profile_image(100, 100), class: "rounded-circle mb-3 border border-secondary" %>
        <h5 class="fw-bold">ユーザーネーム: <%= @user.name %></h5>

        <% if current_user == @user && !@user.guest_user? %>
          <div class="mt-3">
            <%= link_to "プロフィール編集", edit_user_path(@user), class: "btn btn-primary btn-sm px-4" %>
          </div>
        <% end %>
      </div>
    </div>

    <%# 目標一覧セクション %>
    <div class="mt-5">
      <h3 class="text-center">目標一覧</h3>

      <div class="table-responsive">
        <table class="table table-striped table-hover mt-3">
          <thead class="table-dark text-center">
            <tr>
              <th>目標ID</th>
              <th>目標</th>
            </tr>
          </thead>
          <tbody>
            <% @goals.each do |goal| %>
              <tr>
                <td class="text-center"><%= goal.id %></td>
                <td>
                  <%= link_to goal.goal, goal_path(goal), class: 'text-decoration-none fw-bold' %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </main>

</div>
